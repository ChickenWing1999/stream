<!DOCTYPE html>
<html>
<head>
  <title>IPTV Player</title>
</head>
<body>
  <video id="player"></video>

  <ul id="channel-list"></ul>

  <script>
    // Create a video element
    const player = document.querySelector('#player');

    // Load the M3U playlist
    const playlistUrl = 'https://iptv-org.github.io/iptv/index.m3u';
    const xhr = new XMLHttpRequest();
    xhr.open('GET', playlistUrl);
    xhr.onload = function() {
      if (xhr.status === 200) {
        // Parse the M3U playlist
        const playlist = xhr.responseText.split('#EXTINF:')[1].split('\n');

        // Populate the channel list
        const channelList = document.querySelector('#channel-list');
        playlist.forEach((channel, index) => {
          const channelItem = document.createElement('li');
          channelItem.textContent = channel.split(',')[0];
          channelItem.addEventListener('click', function() {
            // Play the selected channel
            player.src = playlist[index];
            player.play();
          });
          channelList.appendChild(channelItem);
        });

        // Play the first channel in the playlist
        player.src = playlist[0];
        player.play();
      } else {
        console.log('Error loading playlist: ' + xhr.statusText);
      }
    };
    xhr.send();

    // Handle channel changes
    player.addEventListener('ended', function() {
      // Play the next channel in the playlist
      player.src = playlist[player.selectedIndex + 1];
      player.play();
    });
  </script>
</body>
</html>
